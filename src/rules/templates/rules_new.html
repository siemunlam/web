{% extends "baseForm.html" %}
{% load staticfiles %}
{% load rest_framework %}

{% block content %}

<div class="container col-md-8 col-md-offset-2">
	<div class="body-header">
		<h1 class="text-center font-bold">Gestión de reglas</h1>
	</div>

	<div class="panel-body" style="padding-right: 0px">
		<form class="form-inline" method="POST" enctype="multipart/form-data">{% csrf_token %}
			<button type="submit" name="drools" class="btn btn-success pull-right">Actualizar reglas de Triage</button>
		</form>
	</div>

	<ul class="nav nav-tabs nav-justified" role="tablist">
		<li role="presentation" class="active"><a href="#tab-categorias" aria-controls="Categorías" role="tab" data-toggle="tab">Categorías</a></li>
		<li role="presentation"><a href="#tab-ajustes" aria-controls="Categorías" role="tab" data-toggle="tab">Ajustes</a></li>		
	</ul>
	
	<!-- Tab panes -->
	<div class="tab-content">
		<div role="tabpanel-categorias" class="tab-pane fade in active" id="tab-categorias">
			<ul class="nav nav-tabs nav-justified" role="tablist">
				<li role="presentation" class="active"><a href="#reglas-categorias" aria-controls="Categorías" role="tab" data-toggle="tab">Categorías</a></li>
				<li role="presentation"><a href="#reglas-fdpc" aria-controls="Factores de precategorización" role="tab" data-toggle="tab">Factores de precategorización</a></li>
				<li role="presentation"><a href="#reglas-rdpc" aria-controls="Reglas de precategorización" role="tab" data-toggle="tab">Reglas de precategorización</a></li>
			</ul>
			<div class="tab-content">
				<!-- Tab categorías -->
				<div role="tabpanel-categorias" class="tab-pane fade in active" id="reglas-categorias">
					<div class="panel panel-default" style="overflow-x:auto;">
						<div class="panel-header">
							<h2 class="text-center">Categorías
								<button type="button" class="btn btn-md btn-success pull-right" title='Crear categoría' data-toggle="modal" data-target="#AddCategoryModal"><span class="glyphicon glyphicon-plus"></span></button>
							</h2>
						</div>
						<!-- Table -->
						<table class="table table-responsive table-striped">
							<thead>
								<tr>
									<th width="5%">Nro</th>
									<th width="45%">Descripción</th>
									<th width="25%">Prioridad</th>
									<th width="25%">Acciones</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
					<p class="text-center">Mostrando <span id='CategoriaCurrentPageAmount'>...</span> de <span id='CategoriaTotalAmount'>...</span> categorías</p>
					<nav aria-label="page navigation">
						<ul id='categoriasPager' class="pager">
							<li class="previous"><a link='#'>Anterior</a></li>
							<li class="next"><a link='#'>Siguiente</a></li>
						</ul>
					</nav>
				</div>
				<!-- Tab Factores de precategorización -->
				<div role="tabpanel-categorias" class="tab-pane fade" id="reglas-fdpc">
					<div class="panel panel-default" style="overflow-x:auto;">
						<div class="panel-header">
							<h2 class="text-center">Factores de precategorización
								<button type="button" class="btn btn-md btn-success pull-right" title='Crear factor de precategorización' data-toggle="modal" data-target="#AddFactorPCModal"><span class="glyphicon glyphicon-plus"></span></button>
							</h2>
						</div>
						<!-- Table -->
						<table class="table table-responsive table-striped">
							<thead>
								<tr>
									<th width="20%">Nro</th>
									<th width="60%">Descripción</th>
									<th width="20%">Acciones</th>
								</tr>
							</thead>
							<tbody>
								{% for fdpc in fdpcs %}
								<tr>
									<td class="font-bold">{{ fdpc.id }}</td>
									<td>{{ fdpc.descripcion }}</td>
									<td>
										<button type="button" class="btn btn-transparent btn-xs" data-toggle="modal" data-target="#FactorPCDetailModal" title='Detalle'>
											<span class="glyphicon glyphicon-list" aria-hidden="true"></span>
										</button>
										<a class="btn btn-transparent btn-xs" href="{% url 'fdpc_update' fdpc.id %}" title='Modificar'><span class="glyphicon glyphicon-pencil text-color-cornflowerblue"></span></a>
										<a class="btn btn-transparent btn-xs" href="{% url 'fdpc_delete' fdpc.id %}" title='Anular'><span class="glyphicon glyphicon-trash text-color-cornflowerblue"></span></a>
									</td>
								</tr>
								{% empty %}
								<tr class="text-center">
									<td id='blank_row' bgcolor="#FFFFFF" colspan="3">Ningún factor de precategorización creado</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
					<p class="text-center">Mostrando <span id='FactoresPCCurrentPageAmount'>...</span> de <span id='FactoresPCTotalAmount'>...</span> factores de precategorización</p>
					<nav aria-label="page navigation">
						<ul id='fdpcPager' class="pager">
							<li class="previous"><a link='#'>Anterior</a></li>
							<li class="next"><a link='#'>Siguiente</a></li>
						</ul>
					</nav>
				</div>
				<!-- Tab Reglas de precategorización -->
				<div role="tabpanel-categorias" class="tab-pane fade" id="reglas-rdpc">
					<div class="panel panel-default" style="overflow-x:auto;">
						<div class="panel-header">
							<h2 class="text-center">Reglas de precategorización
								<button type="button" class="btn btn-md btn-success pull-right" title='Crear regla de precategorización' data-toggle="modal" data-target="#AddReglaPCModal"><span class="glyphicon glyphicon-plus"></span></button>														
							</h2>
						</div>
						<!-- Table -->
						<table class="table table-responsive table-striped">
							<thead>
								<tr>
									<th>Nro</th>
									<th>Condición</th>
									<th>Categoría</th>
									<th>Prioridad</th>
									<th>Acciones</th>
								</tr>
							</thead>
							<tbody>
								{% for regla in rdpcs %}
								<tr>
									<td class="font-bold">{{ regla.id }}</td>
									<td>{{ regla.condicion.factorDePreCategorizacion.descripcion }} es {{ regla.condicion.descripcion }}</td>
									<td>{{ regla.resultado.descripcion }}</td>
									<td>{{ regla.prioridad }}</td>
									<td>
										<a href="{% url 'rdpc_update' regla.id %}" title='Modificar'><span class="glyphicon glyphicon-pencil text-color-cornflowerblue"></span></a>
										<a class="row-icon" href="{% url 'rdpc_delete' regla.id %}" title='Anular'><span class="glyphicon glyphicon-trash text-color-cornflowerblue"></span></a>
									</td>
								</tr>
								{% empty %}
								<tr class="text-center">
									<td id='blank_row' bgcolor="#FFFFFF" colspan="5">Ninguna regla de precategorización creada</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
					<p class="text-center">Mostrando <span id='ReglasPCCurrentPageAmount'>...</span> de <span id='ReglasPCTotalAmount'>...</span> reglas de precategorización</p>
					<nav aria-label="page navigation">
						<ul id='rdpcPager' class="pager">
							<li class="previous"><a link='#'>Anterior</a></li>
							<li class="next"><a link='#'>Siguiente</a></li>
						</ul>
					</nav>
				</div>
			</div>	
		</div>		
		<div role="tabpanel-ajustes" class="tab-pane fade" id="tab-ajustes">
			<ul class="nav nav-tabs nav-justified" role="tablist">
				<li role="presentation" class="active"><a href="#reglas-ajustes" aria-controls="Ajustes" role="tab" data-toggle="tab">Ajustes</a></li>
				<li role="presentation"><a href="#reglas-fda" aria-controls="Factores de ajuste" role="tab" data-toggle="tab">Factores de ajuste</a></li>
				<li role="presentation"><a href="#reglas-rda" aria-controls="Reglas de ajuste" role="tab" data-toggle="tab">Reglas de ajuste</a></li>
			</ul>		
			<div class="tab-content">
				<!-- Tab Ajustes -->
				<div role="tabpanel-ajustes" class="tab-pane fade in active" id="reglas-ajustes">
					<div class="panel panel-default" style="overflow-x:auto;">
						<div class="panel-header">
							<h2 class="text-center">Ajustes</h2>
						</div>
						<!-- Table -->
						<table class="table table-responsive table-striped">
						<thead>
							<tr>
								<th width="50%">Nro</th>
								<th width="50%">Valor</th>
							</tr>
							</thead>
							<tbody>
								{% for ajuste in ajustes %}
								<tr>
									<td class="font-bold">{{ ajuste.id }}</td>
									<td>{{ ajuste.valor }}</td>
								</tr>
								{% empty %}
								<tr class="text-center">
									<td id='blank_row' bgcolor="#FFFFFF" colspan="2">Ningún ajuste creado</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
					<p class="text-center">Mostrando <span id='CurrentPageAmount'>...</span> de <span id='TotalAmount'>...</span> ajustes</p>
					<nav aria-label="page navigation">
						<ul id='ajustePager' class="pager">
							<li class="previous"><a link='#'>Anterior</a></li>
							<li class="next"><a link='#'>Siguiente</a></li>
						</ul>
					</nav>
				</div>
				<!-- Tab Factores de ajuste -->
				<div role="tabpanel-ajustes" class="tab-pane fade" id="reglas-fda">
					<div class="panel panel-default" style="overflow-x:auto;">
						<div class="panel-header">
							<h2 class="text-center">Factores de ajuste
								<button type="button" id="add_fda_btn" class="btn btn-md btn-success pull-right" title='Crear factor de ajuste'><span class="glyphicon glyphicon-plus"></span></button>
							</h2>
						</div>
						<!-- Table -->
						<table class="table table-responsive table-striped">
							<thead>
								<tr>
									<th width="20%">Nro</th>
									<th width="60%">Descripción</th>
									<th width="20%">Acciones</th>
								</tr>
							</thead>
							<tbody>
								{% for fda in fdas %}
								<tr>
									<td class="font-bold">{{ fda.id }}</td>
									<td>{{ fda.descripcion }}</td>
									<td>
										<a href="{% url 'fda_update' fda.id %}" title='Modificar'><span class="glyphicon glyphicon-pencil text-color-cornflowerblue"></span></a>
										<a class="row-icon" href="{% url 'fda_delete' fda.id %}" title='Anular'><span class="glyphicon glyphicon-trash text-color-cornflowerblue"></span></a>
									</td>
								</tr>
								{% empty %}
								<tr class="text-center">
									<td id='blank_row' bgcolor="#FFFFFF" colspan="3">Ningún FDA creado</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
					<p class="text-center">Mostrando <span id='CurrentPageAmount'>...</span> de <span id='TotalAmount'>...</span> factores de ajuste</p>
					<nav aria-label="page navigation">
						<ul id='fdaPager' class="pager">
							<li class="previous"><a link='#'>Anterior</a></li>
							<li class="next"><a link='#'>Siguiente</a></li>
						</ul>
					</nav>
				</div>
				<!-- Tab Reglas de ajuste -->
				<div role="tabpanel-ajustes" class="tab-pane fade" id="reglas-rda">
					<div class="panel panel-default" style="overflow-x:auto;">
						<div class="panel-header">
							<h2 class="text-center">Reglas de ajuste
								<button type="button" id="add_rda_btn" class="btn btn-md btn-success pull-right" title='Crear regla de ajuste'><span class="glyphicon glyphicon-plus"></span></button>
							</h2>
						</div>
						<!-- Table -->
						<table class="table table-responsive table-striped">
							<thead>
								<tr>
									<th>Nro</th>
									<th>Condición</th>
									<th>Ajuste</th>
									<th>Prioridad</th>
									<th>Acciones</th>
								</tr>
							</thead>
							<tbody>
								{% for regla in rdas %}
								<tr>
									<td class="font-bold">{{ regla.id }}</td>
									<td>{{ regla.condicion.factorDeAjuste.descripcion }} es {{ regla.condicion.descripcion }}</td>
									<td>{{ regla.resultado.valor }}</td>
									<td>{{ regla.prioridad }}</td>
									<td>
										<a href="{% url 'rda_update' regla.id %}" title='Modificar'><span class="glyphicon glyphicon-pencil text-color-cornflowerblue"></span></a>
										<a class="row-icon" href="{% url 'rda_delete' regla.id %}" title='Anular'><span class="glyphicon glyphicon-trash text-color-cornflowerblue"></span></a>
									</td>
								</tr>
								{% empty %}
								<tr class="text-center">
									<td id='blank_row' bgcolor="#FFFFFF" colspan="5">Ninguna regla de ajuste creada</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
					<p class="text-center">Mostrando <span id='CurrentPageAmount'>...</span> de <span id='TotalAmount'>...</span> reglas de ajuste</p>
					<nav aria-label="page navigation">
						<ul id='rdaPager' class="pager">
							<li class="previous"><a link='#'>Anterior</a></li>
							<li class="next"><a link='#'>Siguiente</a></li>
						</ul>
					</nav>
				</div>
			</div>			
		</div>		
	</div>
	
	<!-- Modals -->

	<!-- Modals Categoria Begin -->
	<div class="modal fade" id="AddCategoryModal" tabindex="-1" role="dialog" aria-labelledby="AddCategoryModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title text-center">Crear categoría</h4>
				</div>
				<div class="modal-body row">
					<form id="AddCategoryForm" class="form-group" method='POST' enctype="multipart/form-data" autocomplete="off">{% csrf_token %}
						{% render_form create_categoria_serializer %}
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
					<button type="submit" form='AddCategoryForm' class="btn btn-success">Crear</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="CategoryUpdateModal" tabindex="-1" role="dialog" aria-labelledby="CategoryUpdateModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title text-center">Editar categoría  <span id='CategoryUpdateModalId'>...</span></h4>
				</div>
				<div class="modal-body">
					<form id="UpdateCategoryForm" class="form-group" method='PUT' enctype="multipart/form-data" autocomplete="off">
						{% csrf_token %}
						{% render_form update_categoria_serializer %}
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
					<button type="submit" form='UpdateCategoryForm' class="btn btn-success">Editar</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="CategoryDeleteModal" tabindex="-1" role="dialog" aria-labelledby="CategoryDeleteModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title text-center" id="CategoryDeleteModalLabel">Eliminar categoría</h4>
				</div>
				<div class="modal-body text-center">
					<p>¿Está seguro que quiere eliminar la categoría con <strong>Id: <span id='CategoryDeleteModalId'>...</span></strong>?</p>
				</div>
				<div class="modal-footer">
					<form id="DeleteCategoryForm" class="form-group" method='DELETE' enctype="multipart/form-data" autocomplete="off">
						{% csrf_token %}
						<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
						<button type="submit" class="btn btn-danger">Eliminar</button>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- Modals Categoria End -->

	<!-- Modals FactorPC Begin -->
	<div class="modal fade" id="AddFactorPCModal" tabindex="-1" role="dialog" aria-labelledby="AddFactorPCModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title text-center">Crear factor de precategorización</h4>
				</div>
				<div class="modal-body row">
					<form id="AddFactorPCForm" class="form-group" method='POST' enctype="multipart/form-data" autocomplete="off">{% csrf_token %}
						{% render_form create_factorpc_serializer %}
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
					<button type="submit" form='AddFactorPCForm' class="btn btn-success">Crear</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="FactorPCUpdateModal" tabindex="-1" role="dialog" aria-labelledby="FactorPCUpdateModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title text-center">Editar factor de precategorización  <span id='FactorPCUpdateModalId'>...</span></h4>
				</div>
				<div class="modal-body">
					<form id="UpdateFactorPCForm" class="form-group" method='PUT' enctype="multipart/form-data" autocomplete="off">
						{% csrf_token %}
						{% render_form update_factorpc_serializer %}
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
					<button type="submit" form='UpdateFactorPCForm' class="btn btn-success">Editar</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="FactorPCDeleteModal" tabindex="-1" role="dialog" aria-labelledby="FactorPCDeleteModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title text-center" id="FactorPCDeleteModalLabel">Eliminar categoría</h4>
				</div>
				<div class="modal-body text-center">
					<p>¿Está seguro que quiere eliminar el factor de precategorización con <strong>Id: <span id='FactorPCDeleteModalId'>...</span></strong>?</p>
				</div>
				<div class="modal-footer">
					<form id="DeleteFactorPCForm" class="form-group" method='DELETE' enctype="multipart/form-data" autocomplete="off">
						{% csrf_token %}
						<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
						<button type="submit" class="btn btn-danger">Eliminar</button>
					</form>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="FactorPCDetailModal" tabindex="-1" role="dialog" aria-labelledby="FactorPCDetailModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title text-center" id="FactorPCDetailModalLabel">Detalle del factor de precategorización ...</h4>
				</div>
				<div class="modal-body">
					<strong>Valores:</strong>
					<ul class="list-group"></ul>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
				</div>
			</div>
		</div>
	</div>
	<!-- Modals FactorPC End -->

	<!-- Modals ReglaPC Begin -->
	<div class="modal fade" id="AddReglaPCModal" tabindex="-1" role="dialog" aria-labelledby="AddReglaPCModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title text-center">Crear regla de precategorización</h4>
				</div>
				<div class="modal-body row">
					<form id="AddReglaPCForm" class="form-group" method='POST' enctype="multipart/form-data" autocomplete="off">
						{% csrf_token %}
						{% render_form create_reglapc_serializer %}
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
					<button type="submit" form='AddReglaPCForm' class="btn btn-success">Crear</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="ReglaPCUpdateModal" tabindex="-1" role="dialog" aria-labelledby="ReglaPCUpdateModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title text-center">Editar regla de precategorización  <span id='ReglaPCUpdateModalId'>...</span></h4>
				</div>
				<div class="modal-body">
					<form id="UpdateReglaPCForm" class="form-group" method='PUT' enctype="multipart/form-data" autocomplete="off">
						{% csrf_token %}
						{% render_form update_reglapc_serializer %}
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
					<button type="submit" form='UpdateReglaPCForm' class="btn btn-success">Editar</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="ReglaPCDeleteModal" tabindex="-1" role="dialog" aria-labelledby="ReglaPCDeleteModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title text-center" id="ReglaPCDeleteModalLabel">Eliminar categoría</h4>
				</div>
				<div class="modal-body text-center">
					<p>¿Está seguro que quiere eliminar la regla de precategorización con <strong>Id: <span id='ReglaPCDeleteModalId'>...</span></strong>?</p>
				</div>
				<div class="modal-footer">
					<form id="DeleteReglaPCForm" class="form-group" method='DELETE' enctype="multipart/form-data" autocomplete="off">
						{% csrf_token %}
						<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
						<button type="submit" class="btn btn-danger">Eliminar</button>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- Modals ReglaPC End -->

</div>

{% endblock content %}

{% block extra-JS %}
{% url 'ayuda' as ayuda_link %}
{% url 'category_create' as category_create_link %}
{% url 'fdpc_create' as fdpc_create_link %}
{% url 'fda_create' as fda_create_link %}
{% url 'vdfdpc_create' as vdfdpc_create_link %}
{% url 'vdfda_create' as vdfda_create_link %}
{% url 'rda_create' as rda_create_link %}
{% url 'rdpc_create' as rdpc_create_link %}
<!-- <script src='{% static "js/moment-2.18.1.min.js" %}' type="text/javascript"></script> -->
<!-- <script src='{% static "js/django-cookie-handler.js" %}' type="text/javascript"></script> -->
<script src='{% static "js/utils.js" %}' type="text/javascript"></script>
<script src='{% static "js/moment-2.18.1.min.js" %}' type="text/javascript"></script>
<script>	
	// document.getElementById("add_fdpc_btn").onclick = function () { location.href = "{{ fdpc_create_link }}"; };
	// document.getElementById("add_fda_btn").onclick = function () { location.href = "{{ fda_create_link }}"; };
	// document.getElementById("add_rda_btn").onclick = function () { location.href = "{{ rda_create_link }}"; };
	// document.getElementById("add_rdpc_btn").onclick = function () { location.href = "{{ rdpc_create_link }}"; };
	// document.getElementById("add_vdfdpc_btn").onclick = function () { location.href = "{{ vdfdpc_create_link }}"; };
	// document.getElementById("add_vdfda_btn").onclick = function () { location.href = "{{ vdfda_create_link }}"; };


	// CONSTANTS
	const categoria_api_url = '{% if request.is_secure %}https://{% else %}http://{% endif %}{{ request.get_host }}/api/categoria/'
	const categorias_records = document.querySelector('#reglas-categorias > div > table > tbody')
	const fdpc_api_url = '{% if request.is_secure %}https://{% else %}http://{% endif %}{{ request.get_host }}/api/fdpc/'
	const fdpc_records = document.querySelector('#reglas-fdpc > div > table > tbody')
	const vdfdpc_api_url = '{% if request.is_secure %}https://{% else %}http://{% endif %}{{ request.get_host }}/api/vdfdpc/'
	const rdpc_api_url = '{% if request.is_secure %}https://{% else %}http://{% endif %}{{ request.get_host }}/api/rdpc/'
	const rdpc_records = document.querySelector('#reglas-rdpc > div > table > tbody')
	const vdrdpc_api_url = '{% if request.is_secure %}https://{% else %}http://{% endif %}{{ request.get_host }}/api/vdrdpc/'

	/*
	 * FactorPCDetailModalHandler
	 */
	 $('#FactorPCDetailModal').on('show.bs.modal', (event) => {
		const clickedButton = $(event.relatedTarget)
		const factorpc_descr = clickedButton.closest('tr').find('td:eq(1)').text()
		const valores_list = document.querySelector('#FactorPCDetailModal > .modal-dialog > .modal-content > .modal-body > .list-group')
		valores_list.innerHTML = ''

		fetch(`${vdfdpc_api_url}`, getAuthorizedFetchOption()).then(response => {
			return checkStatus(response)
		}).then(response => {
			return response.json()
		}).then(jsonData => {
			jsonData.results.map(valor => {
				if(valor.factorDePreCategorizacion == factorpc_descr) {
					const list_element = document.createElement('li')
					list_element.classList.add('list-group-item')
					list_element.innerText = valor.descripcion
					valores_list.appendChild(list_element)
				}
			})
		}).catch(error => {
			console.log(`Error al realizar fetch de valores del factor de pc ${factorpc_descr}: ${error.message}`)
		})

		document.getElementById('FactorPCDetailModalLabel').innerText = `Detalle del Factor de PC: \"${factorpc_descr}\"`
	})

</script>
<script src='{% static "js/rules/categoria.js" %}' type="text/javascript"></script>
<script src='{% static "js/rules/factor-precategorizacion.js" %}' type="text/javascript"></script>
<script src='{% static "js/rules/regla-precategorizacion.js" %}' type="text/javascript"></script>
{% endblock extra-JS %}